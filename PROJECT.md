# Shopify App 项目总览（V1.0）

## 1. 项目目标
为 Shopify 商家提供代发（fulfillment）能力，打通从店铺授权、商品同步、揽品、订单同步到履约回传的核心闭环。

## 2. V1.0 范围（核心流程）

### 2.1 公共基础模块（P1）
- 账户注册与登录
- Shopify 店铺授权与绑定
- 支付绑定（信用卡 / PayPal 对接）

### 2.2 揽品模块（P1）
- 同步 Shopify 店铺商品
- 通过店铺商品发起揽品
- 揽品状态查询与回传

### 2.3 订单履约模块（P1/P2）
- Shopify 店铺订单同步（P1）
- 订单下单 / 支付模块（P1）
- 订单履约物流预警（P2）

### 2.4 ERP 协同（P1）
- 同步店铺发起的揽品并返回状态
- 同步店铺订单并支持履约处理（回传单号）

## 3. 接口边界

### 3.1 App 端需提供
1. 客户基础信息列表接口
2. 客户基础信息查询接口
3. 揽品请求消息推送接口
4. 揽品请求查询接口
5. 已支付订单消息推送接口
6. 订单查询接口（订单详情）
7. 订单列表接口（定向商家）

### 3.2 ERP 端需提供
1. 揽品处理结果消息推送接口
2. 订单上传物流单号消息推送接口
3. 订单发货消息推送接口
4. 物流试算计算接口

## 4. 技术栈（当前推荐）
- 后端：Node.js 20 + NestJS + TypeScript
- 数据库：PostgreSQL（Prisma）
- 异步任务：Redis + BullMQ
- 前端：React + Shopify Polaris + App Bridge
- 部署：Docker Compose + Nginx

## 5. 里程碑（草案）
- M1：项目骨架、环境、认证与店铺授权
- M2：商品同步、揽品流程、ERP 对接打通
- M3：订单同步、支付订单推送、履约回传
- M4：测试联调、灰度上线、监控告警

## 6. 当前状态
- 状态：规划中
- 下一步：完成基础文档初始化，进入架构与数据模型设计

## 7. 风险与注意事项
- Shopify Webhook 重试与幂等处理必须前置设计
- ERP 回调/推送可能存在延迟与重复，需要消息去重
- 私密接口需签名校验与审计日志
